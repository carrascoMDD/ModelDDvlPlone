<tal:block replace="nothing">
# Copyright (c) 2008 by 2008 Model Driven Development sl and Antonio Carrasco Valero
#
# GNU General Public License (GPL)
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
# 02110-1301, USA.
#
# Authors: 
# Model Driven Development sl  Valencia (Spain) www.ModelDD.org 
# Antonio Carrasco Valero                       carrasco@ModelDD.org
#</tal:block>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en">
<body>


    <div metal:define-macro="tArbolEnTabla_i18n" >
    
        <tal:block tal:define="global pTrue python: True;
                               global pSiempre pSiempre | pTrue;
                               global pPermiteCrearColecciones  pPermiteCrearColecciones | pTrue;
                               global pPermiteCrearElementos    pPermiteCrearElementos   | pTrue;
                               global pPermiteEditarElementos   pPermiteEditarElementos  | pTrue;
                               global pPermiteOrdenarElementos  pPermiteOrdenarElementos | pTrue;
                               global pPermiteEliminarElementos pPermiteEliminarElementos | pTrue;
                               global unasClasesFilas  python: ('odd','even');
                               global unIndexClassFila python: 0" /> 

        <tal:block tal:define="global pArbolColeccionesYElementos python: here.getArbolColeccionesYContenidos( pNombresTiposColeccion)" />
        
        
        <tal:block tal:define="global pNombreTipoColeccion python: pNombresTiposColeccion[ 0]" />
        
        <tal:block tal:condition="python: pSiempre or len( pArbolColeccionesYElementos) > 0 ">
            <h2   i18n:translate="" tal:content="python: pNombreTipoColeccion"><tal:block tal:content="python: pNombreTipoColeccion" /></h2>
            <table width="100%%" cellspacing="0" cellpadding="0" frame="void">
                <tr>
                    <td align="left" valign="baseline" class="formHelp" 
                          i18n:translate=""  tal:content="python: 'description_edit_%s' % pNombreTipoColeccion.lower()">
                        <tal:block tal:content="python: 'description_edit_%s' % pNombreTipoColeccion.lower()" />
                    </td>
                    <td align="right" valign="baseline"> 
                        <tal:block tal:condition="python: pPermiteCrearColecciones">
                            <a href="#" tal:attributes="href python: '%s/Crear?theNewTypeName=%s' % (here.absolute_url() , pNombreTipoColeccion, )">
                                <img src="#" tal:attributes="src python: '%s/add_icon.gif' % here.getRaiz().absolute_url()"  
                                        alt="Crear" title="Crear" id="icon-add"
                                         i18n:domain="ModelDDvlPlone" i18n:attributes="alt ModelDDvlPlone_crearcoleccion_action_label; title ModelDDvlPlone_crear_action_label">
                                &nbsp;
                                <tal:block  i18n:domain="ModelDDvlPlone"  i18n:translate="ModelDDvlPlone_crearcoleccion_action_label">Crear</tal:block>        
                            </a>
                        </tal:block>
                    </td>
                </tr>
            </table>
        </tal:block>



        <tal:block tal:repeat="pUnaColeccionYElementos python: pArbolColeccionesYElementos">
            <tal:block tal:define="global pUnaColeccion python: pUnaColeccionYElementos[ 0];  
                                   global pUnosContenidosColeccion python: pUnaColeccionYElementos[1];
                                   global pNombresTiposContenido python: pUnaColeccion.allowed_content_types" />
              
            <h3 tal:condition="python: not( pUnaColeccion == pArbolColeccionesYElementos[0][0])"    
                tal:content="python: pUnaColeccion.getAttributesMetaAndValues( ['title'])[0][1]" />
            
            <table width="100%%" id="cid_ArbolEnTabla" class="listing" summary="#"  
                i18n:attributes="summary python: pNombreTipoColeccion.lower()"            
                tal:define=" global unIndexClassFila python: 0">
    
                <thead>
                    <tr>
                        <th class="nosort" width="90" align="center"  i18n:domain="ModelDDvlPlone" i18n:translate="ModelDDvlPlone_editar_action_label">&nbsp;Editar&nbsp;</th>
                        <th class="nosort"  align="left"  i18n:domain="ModelDDvlPlone" i18n:translate="ModelDDvlPlone_titulo_label">&nbsp;T&iacute;tulo&nbsp;</th>
                        <th class="nosort" align="left"   i18n:domain="ModelDDvlPlone" i18n:translate="ModelDDvlPlone_descripcion_label">&nbsp;Descripci&oacute;n&nbsp;</th>
                    </tr>
                </thead>
                <tbody>
                    <tal:block tal:repeat="pArbolElemento python: pUnosContenidosColeccion">
                        <metal:block metal:use-macro="here/ArbolEnTabla_i18n_view/macros/tArbolElementoEnTabla_i18n" />
                    </tal:block>
                </tbody>
                <tfoot>
                    <tal:block tal:condition="python: pPermiteCrearElementos">                    
                        <tal:block tal:condition="python: len( pNombresTiposContenido) == 1">
                            <tr class="#" tal:attributes="class python: unasClasesFilas[unIndexClassFila % 2]">
                                <td align="center">
                                    <a href="#" tal:attributes="href python: '%s/Crear?theNewTypeName=%s' % (pUnaColeccion.absolute_url() , pNombresTiposContenido[0], )" >
                                        <img src="#" tal:attributes="src python: '%s/add_icon.gif' % here.getRaiz().absolute_url()"  
                                            alt="Crear" title="Crear" id="icon-add"
                                            i18n:attributes="alt ModelDDvlPlone_crear_action_label; title ModelDDvlPlone_crear_action_label">
                                        </a>
                                </td>
                                <td colspan="1" align="left">
                                    <a href="#" tal:attributes="href python: '%s/Crear?theNewTypeName=%s' % (pUnaColeccion.absolute_url(), pNombresTiposContenido[0], )">
                                        <tal:block  i18n:domain="ModelDDvlPlone" i18n:translate="ModelDDvlPlone_crear_action_label">Crear</tal:block>        
                                        <tal:block   i18n:translate="" tal:content="python: pNombresTiposContenido[0]" ></tal:block>
                                    </a>
                                </td>
                                <tal:block tal:condition="python: pPermiteEditarElementos">                    
                                    <td colspan="1" align="left">&nbsp;</td>
                                </tal:block>
                            </tr>
                        </tal:block>  
                        <tal:block tal:condition="python: len( pNombresTiposContenido) > 1">
                            <tr class="#" tal:attributes="class python: unasClasesFilas[unIndexClassFila % 2]">
                                <td colspan="#" tal:attributes="colspan python: 2 + pPermiteEditarElementos" align="left">
                                        <tal:block  i18n:domain="ModelDDvlPlone" i18n:translate="ModelDDvlPlone_crear_action_label">Crear</tal:block> ... &nbsp;
                                        <span tal:repeat="unNombreTipoContenido python: pNombresTiposContenido">                      
                                            <a href="#" tal:attributes="href python: '%s/Crear?theNewTypeName=%s' % (pUnaColeccion.absolute_url() , unNombreTipoContenido, )"
                                                 i18n:translate="" tal:content="python:  unNombreTipoContenido" />
                                            &nbsp; - &nbsp;
                                        </span>
                                </td>
                            </tr>
                        </tal:block>  
                    </tal:block>                
                </tfoot> 
             </table>
             <br/> 
          </tal:block>  
        
    </div>        









    <div metal:define-macro="tArbolSoloEnTabla_i18n" >
    
        <tal:block tal:define="global pTrue python: True;
                               global pSiempre pSiempre | pTrue;
                               global pPermiteCrearElementos    pPermiteCrearElementos   | pTrue;
                               global pPermiteEditarElementos   pPermiteEditarElementos  | pTrue;
                               global pPermiteOrdenarElementos  pPermiteOrdenarElementos | pTrue;
                               global pPermiteEliminarElementos pPermiteEliminarElementos | pTrue;
                               global unasClasesFilas  python: ('odd','even');
                               global unIndexClassFila python: 0" /> 


        <tal:block tal:define="global pUnosContenidosColeccion python: here.getArbolesColeccion( pNombresTiposContenido, pNombresTiposColeccion);
                               global pUnaColeccion python: here" />


        <tal:block tal:condition="python: pSiempre or len( pUnosContenidosColeccion) > 0 ">


          
            <table width="100%%" id="cid_ArbolSoloEnTabla" class="listing" summary="#"  
                i18n:attributes="summary python: here.meta_type.lower()"            
                tal:define=" global unIndexClassFila python: 0; unasClasesFilas  python: ('odd','even')" >
    
                <thead>
                    <tr>
                        <th class="nosort" width="90" align="left"  i18n:domain="ModelDDvlPlone" i18n:translate="ModelDDvlPlone_editar_action_label">&nbsp;Editar&nbsp;</th>
                        <th class="nosort"  align="left"  i18n:domain="ModelDDvlPlone" i18n:translate="ModelDDvlPlone_titulo_label">&nbsp;T&iacute;tulo&nbsp;</th>
                        <th class="nosort" align="left"   i18n:domain="ModelDDvlPlone" i18n:translate="ModelDDvlPlone_descripcion_label">&nbsp;Descripci&oacute;n&nbsp;</th>
                    </tr>
                </thead>
                <tbody>
                    <tal:block tal:repeat="pArbolElemento python: pUnosContenidosColeccion">
                        <metal:block metal:use-macro="here/ArbolEnTabla_i18n_view/macros/tArbolElementoEnTabla_i18n" />
                    </tal:block>
                </tbody>
                <tfoot>
                    <tal:block tal:condition="python: pPermiteCrearElementos">                    
                        <tal:block tal:condition="python: len( pNombresTiposContenido) == 1">
                            <tr class="#" tal:attributes="class python: unasClasesFilas[unIndexClassFila % 2]">
                                <td align="center">
                                    <a href="#" tal:attributes="href python: '%s/Crear?theNewTypeName=%s' % (here.absolute_url(), pNombresTiposContenido[0])">
                                        <img src="#" tal:attributes="src python: '%s/add_icon.gif' % here.getRaiz().absolute_url()"  
                                            alt="Crear" title="Crear" id="icon-add"
                                            i18n:attributes="alt ModelDDvlPlone_crear_action_label; title ModelDDvlPlone_crear_action_label">
                                        </a>
                                </td>
                                <td colspan="1" align="left">
                                    <a href="#" tal:attributes="href python: '%s/Crear?theNewTypeName=%s' % (here.absolute_url(), pNombresTiposContenido[0])">
                                        <tal:block  i18n:domain="ModelDDvlPlone" i18n:translate="ModelDDvlPlone_crear_action_label">Crear</tal:block>        
                                        <tal:block   i18n:translate="" tal:content="python: pNombresTiposContenido[0]" ></tal:block>
                                    </a>
                                </td>
                                <tal:block tal:condition="python: pPermiteEditarElementos">                    
                                    <td colspan="1" align="left">&nbsp;</td>
                                </tal:block>
                            </tr>
                        </tal:block>  
                        <tal:block tal:condition="python: len( pNombresTiposContenido) > 1">
                            <tr class="#" tal:attributes="class python: unasClasesFilas[unIndexClassFila % 2]">
                                <td colspan="#" tal:attributes="colspan python: 2 + pPermiteEditarElementos" align="left">
                                        <tal:block  i18n:domain="ModelDDvlPlone" i18n:translate="ModelDDvlPlone_crear_action_label">Crear</tal:block> ... &nbsp;
                                        <span tal:repeat="unNombreTipoContenido python: pNombresTiposContenido">                      
                                            <a href="#" tal:attributes="href python: '%s/Crear?theNewTypeName=%s' % (here.absolute_url(), unNombreTipoContenido)"
                                                 i18n:translate="" tal:content="python:  unNombreTipoContenido" />
                                            &nbsp; - &nbsp;
                                        </span>
                                </td>
                            </tr>
                        </tal:block>  
                    </tal:block>                
                </tfoot> 
            </table>
            
        </tal:block>

    </div>        














    <div metal:define-macro="tArbolElementoEnTabla_i18n" >
        <tal:block tal:define="unElemento python: pArbolElemento[ 0]; unNivelElemento python: pArbolElemento[ 1]; unasSubColeccionesYElementos python: pArbolElemento[ 2]" >                        
           
            <tal:block tal:define="pSubArbolElemento python: pArbolElemento" >
                <metal:block metal:use-macro="here/ArbolEnTabla_i18n_view/macros/tFilaElementoArbolEnTabla_i18n" />                        
            </tal:block>
            <tal:block tal:repeat="pSubColeccionYElementos python: unasSubColeccionesYElementos">
                <tal:block tal:condition="python: len( unasSubColeccionesYElementos) > 1">            
                    <metal:block metal:use-macro="here/ArbolEnTabla_i18n_view/macros/tFilaColecionArbolEnTabla_i18n" />
                </tal:block>
                <tal:block tal:define="unaColeccion python: pSubColeccionYElementos[ 0]; unNivelColeccion python: pSubColeccionYElementos[ 1]; unosSubArbolesElementos python: pSubColeccionYElementos[ 2]" >
                    <tal:block tal:repeat="pArbolElemento  python: unosSubArbolesElementos">
                        <metal:block metal:use-macro="here/ArbolEnTabla_i18n_view/macros/tArbolElementoEnTabla_i18n" />                        
                    </tal:block>
                </tal:block>
            </tal:block>
        </tal:block>      
    </div>
     
    
    
    
    
    
    
    
    


    <div metal:define-macro="tFilaColecionArbolEnTabla_i18n" >
        <tal:block tal:define="unaColeccion python: pSubColeccionYElementos[ 0]; unNivelColeccion python: pSubColeccionYElementos[ 1]; unosSubArbolesElementos python: pSubColeccionYElementos[ 2]" >
            <tr class="#" tal:attributes="class python: unasClasesFilas[unIndexClassFila % 2]"
                tal:define="pMetaAndValues python: unaColeccion.getAttributesMetaAndValues( [ 'title', 'description'])" >
                <td/>
                <td align="left">
                    <table align="left" width="100%" cellspacing="0" cellpadding="0" frame="void">
                        <tr >
                            <td width="#" tal:attributes="width python: 16 * (unNivelColeccion - 1)">
                            </td>
                            <td align="left">
                                <span class="visualIcon contenttype-folder" tal:attributes="class python: 'visualIcon contenttype-folder' ">
                                    <h4>
                                        <a href="#" tal:attributes="href python: '%s/Tabular' % (unaColeccion.absolute_url())"
                                            class="state-visible visualIconPadding" title="">
                                            <span tal:content="python: pMetaAndValues[0][1]" />
                                        </a>
                                    </h4>
                                </span>
                            </td>
                        </tr>
                    </table>
                </td>
                <td align="left" tal:content="python: pMetaAndValues[1][1]" />
                <tal tal:define="global  unIndexClassFila   python: unIndexClassFila + 1" />
            </tr>
        </tal:block>
    </div>
    
    
 
 
 
 
 
 
 
 
    <div metal:define-macro="tFilaElementoArbolEnTabla_i18n" >
        <tal:block tal:define="unElemento python: pSubArbolElemento[ 0]; unNivelElemento python: pSubArbolElemento[ 1]; unasSubColeccionesYElementos python: pSubArbolElemento[ 2]" >                        
            <tr class="#" tal:attributes="class python: unasClasesFilas[unIndexClassFila % 2]"
                tal:define="pMetaAndValues python: unElemento.getAttributesMetaAndValues( [ 'title', 'description'])" >
                <tal:block tal:condition="python: pPermiteEditarElementos  or pPermiteOrdenarElementos or pPermiteEliminarElementos">
                   <td align="center">
                       <tal:block tal:condition="python: pPermiteEliminarElementos and unNivelElemento == 1">
                           <a href="#" tal:attributes="href python: '%s/Eliminar' % unElemento.absolute_url()">
                               <img src="#" tal:attributes="src python: '%s/delete_icon.gif' % here.absolute_url()" 
                                   alt="Eliminar" title="Eliminar" id="icon-delete"
                                   i18n:attributes="alt ModelDDvlPlone_eliminar_action_label; title ModelDDvlPlone_eliminar_action_label">
                           </a>
                           &nbsp;                                                                            
                       </tal:block>
                       <tal:block tal:condition="python: pPermiteEliminarElementos and not( unNivelElemento == 1)">
                           <img src="#" tal:attributes="src python: '%s/blank_icon.gif' % here.absolute_url()" 
                               alt="Blank" title="Blank" id="icon-blank">
                           &nbsp;                                                                            
                       </tal:block>
                       <tal:block tal:condition="python: pPermiteEditarElementos">
                           <a href="#" tal:attributes="href python: '%s/Editar' % unElemento.absolute_url()">
                               <img src="#" tal:attributes="src python: '%s/edit.gif' % here.absolute_url()" 
                                   alt="Editar" title="Editar" id="icon-edit"
                                   i18n:attributes="alt ModelDDvlPlone_editar_action_label; title ModelDDvlPlone_editar_action_label">
                           </a>
                           &nbsp;                                                                            
                       </tal:block>
                       <tal:block tal:condition="python: len( pUnosContenidosColeccion) > 1 and pPermiteOrdenarElementos and unNivelElemento == 1">
                           <tal:block tal:condition="python: not unElemento == pUnosContenidosColeccion[ 0][ 0]">
                               <a href="#" tal:attributes="href python: '%s/Tabular?theMovedElementID=%s%ctheMoveDirection=Up' % (pUnaColeccion.absolute_url(), unElemento.id, 59)">                
                                   <img src="#" tal:attributes="src python: '%s/arrowUp.gif' % here.absolute_url()" 
                                       alt="Subir" title="Subir" id="icon-up"
                                       i18n:attributes="alt ModelDDvlPlone_subir_action_label; title ModelDDvlPlone_subir_action_label">
                               </a>
                           </tal:block>
                           <tal:block tal:condition="python: unElemento == pUnosContenidosColeccion[ 0][ 0]">
                               <img src="#" tal:attributes="src python: '%s/arrowBlank.gif' % here.absolute_url()" 
                                   alt="Blank" title="Blank" id="icon-blank">
                           </tal:block>   
                           &nbsp;                                    
                           <tal:block tal:condition="python: not unElemento == pUnosContenidosColeccion[ len( pUnosContenidosColeccion) - 1][ 0]">
                               <a href="#" tal:attributes="href python: '%s/Tabular?theMovedElementID=%s%ctheMoveDirection=Down' % (pUnaColeccion.absolute_url(), unElemento.id, 59)">                
                                   <img src="#" tal:attributes="src python: '%s/arrowDown.gif' % here.absolute_url()" 
                                       alt="Bajar" title="Bajar" id="icon-down"
                                       i18n:attributes="alt ModelDDvlPlone_bajar_action_label; title ModelDDvlPlone_bajar_action_label">
                               </a>
                           </tal:block>
                           <tal:block tal:condition="python: unElemento == pUnosContenidosColeccion[ len( pUnosContenidosColeccion) - 1][ 0]">
                               <img src="#" tal:attributes="src python: '%s/arrowBlank.gif' % here.absolute_url()" 
                                   alt="Blank" title="Blank" id="icon-blank">
                           </tal:block>                                       
                       </tal:block>
                       <tal:block tal:condition="python: len( pUnosContenidosColeccion) > 1 and pPermiteOrdenarElementos and not( unNivelElemento == 1)">
                           <img src="#" tal:attributes="src python: '%s/arrowBlank.gif' % here.absolute_url()" 
                               alt="Blank" title="Blank" id="icon-blank">
                           <img src="#" tal:attributes="src python: '%s/arrowBlank.gif' % here.absolute_url()" 
                               alt="Blank" title="Blank" id="icon-blank">                       
                       </tal:block>
                       
                   </td>
               </tal:block>
               <td align="left">
                    <tal:block tal:condition="python: unNivelElemento > 1">
                        <table align="left"  width="100%" cellspacing="0" cellpadding="0" frame="void">
                            <tr >
                                <td width="#" tal:attributes="width python: 16 * (unNivelElemento - 1)">
                                </td>
                                <td align="left">
                                    <span class="visualIcon contenttype-xxx" tal:attributes="class python: 'visualIcon contenttype-%s' % unElemento.portal_type.lower()">
                                       <h4>
                                           <a href="#" tal:attributes="href python: '%s/Tabular' % ( unElemento.absolute_url())"
                                               class="state-visible visualIconPadding" title="">
                                               <span tal:content="python: pMetaAndValues[0][1]" />
                                           </a>
                                       </h4>
                                    </span>
                                </td>
                            </tr>
                        </table>
                    </tal:block>
                    <tal:block tal:condition="python: not( unNivelElemento > 1)">
                        <span class="visualIcon contenttype-xxx" tal:attributes="class python: 'visualIcon contenttype-%s' % unElemento.portal_type.lower()">
                            <h4>
                                <a href="#" tal:attributes="href python: '%s/Tabular' % ( unElemento.absolute_url())"
                                    class="state-visible visualIconPadding" title="">
                                    <span tal:content="python: pMetaAndValues[0][1]" />
                                </a>
                            </h4>
                        </span>
                    </tal:block>
               </td>
               <td align="left" tal:content="python: pMetaAndValues[1][1]" />
               <tal tal:define="global  unIndexClassFila   python: unIndexClassFila + 1" />
           </tr>
        </tal:block>
    </div>
    





















</body>
</html>

