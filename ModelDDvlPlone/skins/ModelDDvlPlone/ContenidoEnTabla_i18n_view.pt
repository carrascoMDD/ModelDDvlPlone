<tal:block replace="nothing">
# Copyright (c) 2008 by 2008 Model Driven Development sl and Antonio Carrasco Valero
#
# GNU General Public License (GPL)
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
# 02110-1301, USA.
#
# Authors: 
# Model Driven Development sl  Valencia (Spain) www.ModelDD.org 
# Antonio Carrasco Valero                       carrasco@ModelDD.org
#</tal:block>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en">
<body>

    <div metal:define-macro="tContenidoEnTabla_i18n" >
    
        <tal:block tal:define="
                               global pNombresTiposContenido    pNombresTiposContenido | python: [];
                               global pTitulo                   pTitulo      | python: pNombresTiposContenido[0];
                               global pTituloMsgId              pTituloMsgId | pTitulo;
                               global pDescripcion              pDescripcion | pTitulo;
                               global pDescripcionMsgId         pDescripcionMsgId   | pDescripcion;
                               global pTrue                     python: True;
                               global pSiempre                  pSiempre | pTrue;
                               global pPermiteCrearElementos    pPermiteCrearElementos   | pTrue;
                               global pPermiteEditarElementos   pPermiteEditarElementos  | pTrue;
                               global unasClasesFilas           python: ('odd','even');
                               global unIndexClassFila          python: 0" /> 

        <tal:block tal:define="global pElementos python: here.getContenidos( pNombresTiposContenido)" />
        
        
        <tal:block tal:condition="python: pSiempre or len( pElementos) > 0 ">
            <h2  i18n:translate="" tal:content="python: pTituloMsgId"><tal:block tal:content="python: pTitulo" /></h2>
            <table width="100%%" cellspacing="0" cellpadding="0" frame="void">
                <tr>
                    <td align="left" valign="baseline" class="formHelp" 
                          i18n:translate=""  tal:content="python: pDescripcionMsgId">
                        <tal:block tal:content="python: pDescripcion" />
                    </td>
                </tr>
            </table>
        </tal:block>
                
               
        <table width="100%%" id="cid_ContenidoEnTabla" class="listing" summary="#"  
            i18n:attributes="summary python: pNombreClase"            
            tal:define=" global unIndexClassFila python: 0" >
    
            <thead>
                <tr>
                    <th class="nosort" width="40" align="left" i18n:domain="ModelDDvlPlone"  i18n:translate="Editar">&nbsp;Editar&nbsp;</th>
                    <th class="nosort"  align="left" i18n:domain="ModelDDvlPlone"  i18n:translate="ModelDDvlPlone_titulo_label">&nbsp;T&iacute;tulo&nbsp;</th>
                    <th class="nosort" align="left" i18n:domain="ModelDDvlPlone"  i18n:translate="ModelDDvlPlone_descripcion_label">&nbsp;Descripci&oacute;n&nbsp;</th>
                </tr>
            </thead>
            <tbody>
                <tr tal:repeat="unElemento python: pElementos"
                    class="#" tal:attributes="class python: unasClasesFilas[unIndexClassFila % 2]">
                    <tal:block tal:define="pMetaAndValues python: unElemento.getAttributesMetaAndValues( [ 'title', 'description'])" >
                        <tal:block tal:condition="pPermiteEditarElementos">
                            <td align="center">
                                <a href="#" tal:attributes="href python:  '%s/%s/Editar' % ( here.absolute_url(), unElemento.id)">
                                <img src="#" tal:attributes="src python: '%s/edit.gif' % here.portal_url()" 
                                        alt="Editar" title="Editar" id="icon-edit"
                                        i18n:attributes="alt ModelDDvlPlone_editar_action_label; title ModelDDvlPlone_editar_action_label">
                                </a>
                            </td>
                        </tal:block>
                        <td align="left">
                            <span class="visualIcon contenttype-xxx" tal:attributes="class python: 'visualIcon contenttype-%s' % unElemento.portal_type.strip().lower()">
                               <h4>
                                   <a href="#" tal:attributes="href python: '%s/Tabular' % unElemento.absolute_url()"
                                       class="state-visible visualIconPadding" title="">
                                       <span tal:content="python: pMetaAndValues[0][1]" />
                                   </a>
                               </h4>
                           </span>
                        </td>
                        <td align="left" tal:content="python: pMetaAndValues[1][1]" />
                        <tal tal:define="global  unIndexClassFila   python: unIndexClassFila + 1" />
                    </tal:block>
                </tr>
            </tbody>
           
            
            <tfoot>
                <tal:block tal:condition="python: pPermiteCrearElementos">                    
                    <tal:block tal:condition="python: len( pNombresTiposContenido) == 1">
                        <tr class="#" tal:attributes="class python: unasClasesFilas[unIndexClassFila % 2]">
                            <td align="center">
                                <a href="#" tal:attributes="href python: '%s/createObject?type_name=%s' % (here.absolute_url(), pNombresTiposContenido[0], )">
                                    <img src="#" tal:attributes="src python: '%s/add_icon.gif' % here.portal_url()"  
                                        alt="Crear" title="Crear" id="icon-add"
                                        i18n:attributes="alt ModelDDvlPlone_crear_action_label; title ModelDDvlPlone_crear_action_label">
                                    </a>
                            </td>
                            <td colspan="1" align="left">
                                <a href="#" tal:attributes="href python: '%s/createObject?type_name=%s' % (here.absolute_url(), pNombresTiposContenido[0], )">
                                    <tal:block  i18n:domain="ModelDDvlPlone" i18n:translate="ModelDDvlPlone_crear_action_label">Crear</tal:block>        
                                    <tal:block   i18n:translate="" tal:content="python: pNombresTiposContenido[0]" ></tal:block>
                                </a>
                            </td>
                            <tal:block tal:condition="python: pPermiteEditarElementos">                    
                                <td colspan="1" align="left">&nbsp;</td>
                            </tal:block>
                        </tr>
                    </tal:block>  
                    <tal:block tal:condition="python: len( pNombresTiposContenido) > 1">
                        <tr class="#" tal:attributes="class python: unasClasesFilas[unIndexClassFila % 2]">
                            <td colspan="#" tal:attributes="colspan python: 2 + pPermiteEditarElementos" align="left">
                                    <tal:block i18n:domain="ModelDDvlPlone"  i18n:translate="ModelDDvlPlone_crear_action_label">Crear</tal:block> ... &nbsp;
                                    <span tal:repeat="unNombreTipoContenido python: pNombresArquetiposContenido">                      
                                        <a href="#" tal:attributes="href python: '%s/createObject?type_name=%s' % (here.absolute_url(), unNombreTipoContenido, )"
                                             i18n:translate="" tal:content="python: unNombreTipoContenido" />
                                        &nbsp; - &nbsp;
                                    </span>
                            </td>
                        </tr>
                    </tal:block>  
                </tal:block>                
            </tfoot> 
         </table>
         <br/> 
        
    </div>        


</body>
</html>

